#!/bin/sh
SERVICE="smartgrid"
IP="$1"

print_flag(){
    FLAG=$1
    TIMESTAMP=$(date +%s)
    echo "${SERVICE}|${IP}|${FLAG}|${TIMESTAMP}"
}

exploit(){
    # Get flags, may takes some time
    sleep 2


    for i in `seq 10`;do
        FLAG=$(cat /dev/urandom | tr -cd 'a-f0-9' | head -c 32) 
        print_flag "$FLAG"
    done
}

exploit
